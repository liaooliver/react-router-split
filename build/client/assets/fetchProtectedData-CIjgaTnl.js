import{a as u}from"./firebase-CTRYxaob.js";import{a as c,b as d}from"./axios-DieNybu2.js";async function p(s){const e=u.currentUser;if(!e)throw new Error("尚未登入");const t=await e.getIdToken();try{return(await c.post("/events",{name:s},{headers:{Authorization:`Bearer ${t}`}})).data}catch(o){throw o.response?o.response.data:new Error("新增事件失敗")}}async function f(){const s=u.currentUser;if(!s)throw new Error("尚未登入");const e=await s.getIdToken();try{return(await c.get("/dashboard",{headers:{Authorization:`Bearer ${e}`}})).data}catch(t){throw t.response?t.response.data:new Error("無法取得儀表板資料")}}async function E(s){var o,n,r;const e=u.currentUser;if(!e)throw new Error("尚未登入");const t=await e.getIdToken();try{return(await c.post("/users/email-exists",{email:s},{headers:{Authorization:`Bearer ${t}`}})).data}catch(a){throw d.isAxiosError(a)?new Error(((n=(o=a.response)==null?void 0:o.data)==null?void 0:n.error)||`HTTP error! status: ${(r=a.response)==null?void 0:r.status}`):a}}async function T({email:s,displayName:e,uid:t,idToken:o}){var n,r,a;try{return(await c.post("/users/find-or-create",{email:s,displayName:e,uid:t},{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){throw d.isAxiosError(i)?new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||`HTTP error! status: ${(a=i.response)==null?void 0:a.status}`):i}}async function g(){var e,t,o,n;const s=u.currentUser;if(!s)throw new Error("No user is currently signed in.");try{const r=await s.getIdToken(!0),a=await c.post("/users/google/find-or-create",{},{headers:{Authorization:`Bearer ${r}`}});return a.status===204?null:a.data}catch(r){throw d.isAxiosError(r)?(console.error("API call to /login/google failed:",((e=r.response)==null?void 0:e.data)||r.message),new Error(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||`HTTP error! status: ${(n=r.response)==null?void 0:n.status}`)):r}}export{p as a,T as b,E as c,g as d,f};
