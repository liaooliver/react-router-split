import{w as f}from"./tslib.es6-_MLvj5KC.js";import{l as e,p as i,r}from"./chunk-KNED5TY2-Cl3wCyk9.js";import{f as g}from"./fetchProtectedData-CIjgaTnl.js";import{B as j}from"./Button-XTR6J30C.js";import{D as y,P as N}from"./DebtOverview-Jl1onUf-.js";import{C,a as w,b as D,c as k,d as v,e as E}from"./Card-D9vF-guT.js";import{c as S}from"./createLucideIcon-BSR5BV8j.js";import{u as T}from"./AuthContext-BkITLJif.js";import"./firebase-CTRYxaob.js";import"./axios-DieNybu2.js";import"./Dialog-CQYq49fn.js";import"./index-CyOlW-9v.js";import"./index-DUjh1uFd.js";import"./index-B0El3IGW.js";import"./proxy-BMHVCQmy.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],I=S("calendar",F),P=({events:a})=>{const l=t=>{switch(t){case"active":return{label:"進行中",desc:"未結算",bgColor:"bg-blue-100 text-blue-800"};case"pending":return{label:"待還款",desc:"部分還款",bgColor:"bg-yellow-100 text-yellow-800"};case"settled":return{label:"已結算",desc:"已結算",bgColor:"bg-green-100 text-green-800"};case"finalized":return{label:"已完成",desc:"已完成",bgColor:"bg-gray-900 text-gray-100"};default:return{label:"未知",desc:"未知狀態",bgColor:"bg-gray-100 text-gray-800"}}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-md font-medium text-[#263238] mb-4",children:"所有事件"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-[500px] overflow-auto",children:a.map(t=>{const o=l(t.status);return e.jsx(i,{to:`/events/${t.id}`,className:"block",children:e.jsxs(C,{className:"py-3 gap-3 border border-gray-200 hover:border-[#0066CC]",children:[e.jsxs(w,{children:[e.jsx(D,{className:"text-lg font-semibold",children:t.name}),e.jsxs(k,{className:"flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),t.date]})]}),e.jsxs(v,{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[t.members.length," 位成員 • ",t.expenses.length," ","筆費用"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["累積費用：",e.jsxs("span",{className:t.balance>=0?"text-[#10B981]":"text-[#EF4444]",children:["$",t.balance]})]})]}),e.jsx(E,{children:e.jsx("div",{className:"w-full flex items-center",children:e.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded-full ${o.bgColor}`,children:o.label})})})]})},t.id)})})]})};function X({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const R=()=>{const{currentUser:a,logOut:l}=T(),[t,o]=r.useState(null),[m,n]=r.useState(!0),[d,x]=r.useState(null);if(r.useEffect(()=>{(async()=>{n(!0),x(null);try{const s=await g();console.log(s),o(s.data)}catch{l()}finally{n(!1)}})()},[]),r.useEffect(()=>{(async()=>{if(a){const s=await a.getIdToken(!0);console.log(s),localStorage.setItem("token",JSON.stringify(s))}})()},[a]),m)return e.jsx("div",{className:"text-center mt-8",children:"載入中..."});if(d)return e.jsx("div",{className:"text-center mt-8 text-red-500",children:d});if(!t)return e.jsx("div",{className:"text-center mt-8",children:"沒有資料"});const{events:h,unpaidDebtsTotal:u,balanceTotal:L,user:$,debtOverview:c}=t,p=(c==null?void 0:c.debts)||[];return e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-6",children:[e.jsx("header",{className:"text-center text-[24px] font-semibold text-[#263238] py-4",children:"我的帳本"}),e.jsx("div",{className:"flex justify-evenly text-center bg-white p-4 border rounded-xl",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#71717A]",children:"待收欠款"}),e.jsxs("p",{className:"text-[20px] font-semibold text-[#EF4444]",children:["$",u]})]})}),e.jsx(P,{events:h}),e.jsx(y,{debts:p}),e.jsx(i,{to:"/createEvent",children:e.jsx(j,{className:"fixed bottom-8 right-8 bg-[#FF5733] text-white rounded-full w-12 h-12 p-0",children:e.jsx(N,{className:"w-5 h-5"})})})]})},Y=f(R);export{Y as default,X as meta};
